<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · LSPNeovim.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">LSPNeovim.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ExpandingMan/LSPNeovim.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="LSPNeovim.jl"><a class="docs-heading-anchor" href="#LSPNeovim.jl">LSPNeovim.jl</a><a id="LSPNeovim.jl-1"></a><a class="docs-heading-anchor-permalink" href="#LSPNeovim.jl" title="Permalink"></a></h1><p>This package is for interfacing the neovim <a href="https://microsoft.github.io/language-server-protocol/">language server protocol</a> (LSP) client <a href="https://github.com/neovim/nvim-lsp">nvim-lsp</a> with the Julia language server <a href="https://github.com/julia-vscode/LanguageServer.jl">LanguageServer.jl</a>.</p><p>The LSP provides code analysis capabilities for editors such as auto-completion, jump-to-definition and documentation links.</p><p>Note that this requires at least neovim 0.5.  You can get nightly binaries as a convenient AppImage from <a href="https://github.com/neovim/neovim/releases/download/nightly/nvim.appimage">here</a>.</p><p><strong>NOTE:</strong> This package is experimental.  It requires <a href="https://github.com/ExpandingMan/nvim-lsp/tree/em/LSPNeovim">this fork</a> of <code>nvim-lsp</code> to work.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Install <a href="https://github.com/neovim/nvim-lsp">nvim-lsp</a>.  Once that is done, LSPNeovim can be installed with the command <code>:LspInstall julials</code>.</p><h3 id="Requirements:"><a class="docs-heading-anchor" href="#Requirements:">Requirements:</a><a id="Requirements:-1"></a><a class="docs-heading-anchor-permalink" href="#Requirements:" title="Permalink"></a></h3><ul><li>Julia 1.4</li><li>Neovim 0.5</li><li><a href="https://github.com/neovim/nvim-lsp">nvim-lsp</a></li></ul><h3 id="init.vim-Example"><a class="docs-heading-anchor" href="#init.vim-Example"><code>init.vim</code> Example</a><a id="init.vim-Example-1"></a><a class="docs-heading-anchor-permalink" href="#init.vim-Example" title="Permalink"></a></h3><p>The following is an example of an <code>init.vim</code> using <a href="https://github.com/junegunn/vim-plug">vim-plug</a>.</p><pre><code class="language-vim">call plug#begin(&#39;~/.config/nvim/plugged&#39;)

Plug &#39;neovim/nvim-lsp&#39;
&quot; the below is not required, but currently nvim-lsp is hard to configure without it
Plug &#39;haorenW1025/diagnostic-nvim&#39;

call plug#end()

&quot; the below is a Lua code block
lua &lt;&lt; EOF
    local nvim_lsp = require&#39;nvim_lsp&#39;
    nvim_lsp.julials.setup({on_attach=require&#39;diagnostic&#39;.on_attach})
EOF
&quot; alternatively one can call `nvim_lsp.julials.setup()` above if not using diagnostic-nvim

&quot; enable completion (requires separate plugin such as deoplete-lsp)
autocmd Filetype julia setlocal omnifunc=v:lua.vim.lsp.omnifunc</code></pre><p>Note that you will have to run <code>:LspInstall julials</code> to install LSPNeovim for use with neovim.</p><h3 id="Custom-Install"><a class="docs-heading-anchor" href="#Custom-Install">Custom Install</a><a id="Custom-Install-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Install" title="Permalink"></a></h3><p>LSPNeovim is normally run by nvim-lsp by running Julia in the LSPNeovim environment.  It is possible to explicitly define the Julia command run by nvim-lsp to start the language server.  For example</p><pre><code class="language-lua">local nvim_lsp = require&#39;nvim_lsp&#39;
local configs = require&#39;nvim_lsp/configs&#39;
-- Check if it&#39;s already defined for when I reload this file.
if not nvim_lsp.julials then
  configs.julials = {
    default_config = {
      cmd = {
              &quot;julia&quot;, &quot;--project=/path/to/env&quot;, &quot;--startup-file=no&quot;, &quot;--history-file=no&quot;,
              &quot;/path/to/runscript&quot;
          };
      filetypes = {&#39;julia&#39;};
      root_dir = function(fname)
        return nvim_lsp.util.find_git_ancestor(fname) or vim.loop.os_homedir()
      end;
      settings = {};
    };
  }
end
nvim_lsp.julials.setup{}</code></pre><p>(this needs to be run in a <code>lua &lt;&lt; EOF ... EOF</code> block as shown above or from a separate script using <code>luafile scriptname.lua</code> or <code>lua require&#39;scriptname&#39;</code>) The field <code>cmd</code> in the table above gives the default command for starting the Julia language server where <code>/path/to/env</code> gives the path to the environment the language server runs in (i.e. <em>NOT</em> the environment you want to analyze).  <code>/path/to/runscript</code> is the path to a script for running the language server.  It is recommended that you only use <code>LSPNeovim/bin/run.jl</code> for this, as this script &quot;bootstraps&quot; Julia into an environment in which the language server can run.  However, if you wish to install LSPNeovim manually, or through the Julia package manager in your main environment with <code>Pkg.add</code> or <code>Pkg.dev</code>, you will need to modify the above run command to point to your instance of <code>LSPNeovim</code>.</p><h3 id="Unobtrusive-Mode"><a class="docs-heading-anchor" href="#Unobtrusive-Mode">Unobtrusive Mode</a><a id="Unobtrusive-Mode-1"></a><a class="docs-heading-anchor-permalink" href="#Unobtrusive-Mode" title="Permalink"></a></h3><p>Historically getting all of the features of LanguageServer.jl working has been difficult. If you set all indicators and warnings to be too aggressive, slight breakage can be infuriating.  If you want to get all available features without being molested by broken highlights, you can use <a href="https://github.com/haorenW1025/diagnostic-nvim">diagnostic-nvim</a> and set the following</p><pre><code class="language-vim">let g:diagnostic_enable_virtual_text = 0
let g:diagnostic_show_sign = 0
let g:diagnostic_enable_underline = 0</code></pre><p>To use available features on command, you will need to set keys for them, for example</p><pre><code class="language-vim">nnoremap &lt;silent&gt; &lt;leader&gt;lg :lua vim.lsp.util.show_line_diagnostics()&lt;CR&gt;
nnoremap &lt;silent&gt; &lt;leader&gt;lh :lua vim.lsp.buf.hover()&lt;CR&gt;
nnoremap &lt;silent&gt; &lt;leader&gt;lf :lua vim.lsp.buf.definition()&lt;CR&gt;
nnoremap &lt;silent&gt; &lt;leader&gt;lr :lua vim.lsp.buf.references()&lt;CR&gt;
nnoremap &lt;silent&gt; &lt;leader&gt;l0 :lua vim.lsp.buf.document_symbol()&lt;CR&gt;</code></pre></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 16 June 2020 22:11">Tuesday 16 June 2020</span>. Using Julia version 1.5.0-beta1.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
